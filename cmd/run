#!/bin/bash -e

ROOT=$(realpath $(dirname $0)/..)
cd $ROOT

FAUCET=$(realpath $ROOT/../faucet)

if [ ! -d $FAUCET ]; then
    echo Faucet directory $FAUCET not found.
    false
fi

docker ps > /dev/null 2>&1 || service docker start

ovsctl=/usr/share/openvswitch/scripts/ovs-ctl
$ovsctl status || sudo $ovsctl start

sudo env DAQ_CONTAINER=$DAQ_CONTAINER PYTHONPATH=$FAUCET TERM=dumb python daq/daq.py
