#!/bin/bash -e

#FAUCET_TESTS=-n
FAUCET_TESTS="-n -k FaucetDockerTest"

ROOT=$(realpath $(dirname $0)/..)
cd $ROOT/../faucet

sudo docker build --pull -t faucet/tests -f Dockerfile.tests  .

#CMD=
CMD=bash

echo "docker/runtests.sh && cd tests && ./faucet_mininet_test.py $FAUCET_TESTS"

docker run -ti -v $PWD:/faucet-src -e FAUCET_TESTS="$FAUCET_TESTS" \
       --sysctl net.ipv6.conf.all.disable_ipv6=0 --privileged faucet/tests $CMD
