#!/bin/bash -e
#
# Simple helper script to run the prototype MUD ACL generator.
#

ROOT=$(dirname $0)/..

DEVICE_TYPES_FILE=device_types.json

cd $ROOT

test -d inst/ || mkdir inst
touch inst/ || sudo chown $USER inst

test -f local/$DEVICE_TYPES_FILE || cp misc/$DEVICE_TYPES_FILE local/
cp -f local/$DEVICE_TYPES_FILE inst/$DEVICE_TYPES_FILE

rm -rf inst/acl_templates
mkdir inst/acl_templates
rm -rf inst/port_acls
mkdir inst/port_acls

mudacl/bin/run.sh

ls -l inst/acl_templates inst/port_acls inst/$DEVICE_TYPES_FILE
